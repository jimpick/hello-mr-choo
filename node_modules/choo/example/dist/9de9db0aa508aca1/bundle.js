!function(){function e(e,t){return function(){var e=y,t=document.createElement("header");t.setAttribute("class","header");var n=document.createElement("h1");e(n,["todos"]);var o=document.createElement("input");return o.setAttribute("value",arguments[0]),o.setAttribute("autofocus","autofocus"),o.setAttribute("placeholder","What needs to be done?"),o.onkeydown=arguments[1],o.setAttribute("class","new-todo"),e(t,["\n      ",n,"\n      ",o,"\n    "]),t}(e.todos.input,function(e){var n=e.target.value;n&&(13===e.keyCode?(t("todos:input",""),t("todos:create",n)):t("todos:input",n))})}function t(e,t){function n(e,t,n,o){var r=t===n?"selected":"",i="#"+e.toLowerCase();return"#all"===i&&(i="/"),function(){var e=y,t=document.createElement("li"),n=document.createElement("a");return n.setAttribute("href",arguments[0]),n.setAttribute("class",arguments[1]),e(n,["\n          ",arguments[2],"\n        "]),e(t,["\n        ",n,"\n      "]),t}(i,r,e)}var o=e.href.replace(/^\//,"")||"",r=e.todos.active.length,i=e.todos.done.length;return function(){var e=y,t=document.createElement("footer");t.setAttribute("class","footer");var n=document.createElement("span");n.setAttribute("class","todo-count");var o=document.createElement("strong");e(o,[arguments[0]]),e(n,["\n        ",o,"\n        item",arguments[1]," left\n      "]);var r=document.createElement("ul");return r.setAttribute("class","filters"),e(r,["\n        ",arguments[2],"\n        ",arguments[3],"\n        ",arguments[4],"\n      "]),e(t,["\n      ",n,"\n      ",r,"\n      ",arguments[5],"\n    "]),t}(r,1===e.todos.all?"":"s",n("All","",o),n("Active","active",o),n("Completed","completed",o),i?function(e){return function(){var e=y,t=document.createElement("button");return t.onclick=arguments[0],t.setAttribute("class","clear-completed"),e(t,["\n        Clear completed\n      "]),t}(function(){e("todos:deleteCompleted")})}(t):"")}function n(e,t){function n(n){t("todos:update",{id:e.id,editing:!1,name:n.target.value})}var o=function(e){for(var t="",n=Object.keys(e),o=0,r=n.length;o<r;o++){var i=n[o];e[i]&&(t+=i+" ")}return t}({completed:e.done,editing:e.editing});return function(){var e=y,t=document.createElement("li");t.setAttribute("id",arguments[8]),t.setAttribute("class",arguments[9]);var n=document.createElement("div");n.setAttribute("class","view");var o=document.createElement("input");o.setAttribute("type","checkbox"),arguments[0]&&o.setAttribute("checked","checked"),o.onchange=arguments[1],o.setAttribute("class","toggle");var r=document.createElement("label");r.ondblclick=arguments[2],e(r,[arguments[3]]);var i=document.createElement("button");i.onclick=arguments[4],i.setAttribute("class","destroy"),e(n,["\n        ",o,"\n        ",r,"\n        ",i,"\n      "]);var s=document.createElement("input");return s.setAttribute("value",arguments[5]),s.onkeydown=arguments[6],s.onblur=arguments[7],s.setAttribute("class","edit"),e(t,["\n      ",n,"\n      ",s,"\n    "]),t}(e.done,function(n){t("todos:toggle",e.id)},function(n){t("todos:edit",e.id)},e.name,function(n){t("todos:delete",e.id)},e.name,function(e){13===e.keyCode?n(e):27===e.code&&t("todos:unedit")},n,e.id,o)}function o(e,t){var o=e.href.replace(/^\//,"")||"",r="completed"===o?e.todos.done:"active"===o?e.todos.active:e.todos.all;return function(){var e=y,t=document.createElement("section");t.setAttribute("class","main");var n=document.createElement("input");n.setAttribute("type","checkbox"),arguments[0]&&n.setAttribute("checked","checked"),n.onchange=arguments[1],n.setAttribute("class","toggle-all");var o=document.createElement("label");o.setAttribute("style","display: none;"),o.setAttribute("for","toggle-all"),e(o,["\n        Mark all as done\n      "]);var r=document.createElement("ul");return r.setAttribute("class","todo-list"),e(r,["\n        ",arguments[2],"\n      "]),e(t,["\n      ",n,"\n      ",o,"\n      ",r,"\n    "]),t}(e.todos.done.length===e.todos.all.length,function(){t("todos:toggleAll")},r.map(function(e){return n(e,t)}))}function r(e,t){t=t||T;var n;return C?(n=window.requestIdleCallback(function(n){if(n.timeRemaining()<=10&&!n.didTimeout)return r(e,t);e(n)},t),window.cancelIdleCallback.bind(window,n)):L?(n=setTimeout(e,0),clearTimeout.bind(window,n)):void 0}function i(e){e&&S(e)}function s(e){if(!(this instanceof s))return new s(e);this._name=e||"nanobus",this._starListeners=[],this._listeners={}}function a(e,t){for(var n=t.attributes,o=e.attributes,r=null,i=null,s=null,a=null,u=o.length-1;u>=0;--u)s=(a=o[u]).name,r=a.namespaceURI,i=a.value,r?(s=a.localName||s,t.getAttributeNS(r,s)!==i&&t.setAttributeNS(r,s,i)):t.hasAttribute(s)?t.getAttribute(s)!==i&&("null"===i||"undefined"===i?t.removeAttribute(s):t.setAttribute(s,i)):t.setAttribute(s,i);for(var d=n.length-1;d>=0;--d)!1!==(a=n[d]).specified&&(s=a.name,(r=a.namespaceURI)?(s=a.localName||s,e.hasAttributeNS(r,s)||t.removeAttributeNS(r,s)):e.hasAttributeNS(null,s)||t.removeAttribute(s))}function u(e,t){for(var n=0;n<$;n++){var o=V[n];e[o]?t[o]=e[o]:t[o]&&(t[o]=void 0)}}function d(e,t){f(e,t,"selected")}function c(e,t){var n=e.value,o=t.value;f(e,t,"checked"),f(e,t,"disabled"),n!==o&&(t.setAttribute("value",n),t.value=n),"null"===n&&(t.value="",t.removeAttribute("value")),e.hasAttributeNS(null,"value")?"range"===t.type&&(t.value=n):t.removeAttribute("value")}function l(e,t){var n=e.value;if(n!==t.value&&(t.value=n),t.firstChild&&t.firstChild.nodeValue!==n){if(""===n&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=n}}function f(e,t,n){e[n]!==t[n]&&(t[n]=e[n],e[n]?t.setAttribute(n,""):t.removeAttribute(n))}function h(e,t){return t?e?e.isSameNode&&e.isSameNode(t)?t:e.tagName!==t.tagName?e:(M(e,t),m(e,t),t):null:e}function m(e,t){for(var n,o,r,i,s=0,a=0;n=t.childNodes[a],o=e.childNodes[a-s],n||o;a++)if(o)if(n)if(p(o,n))(r=h(o,n))!==n&&(t.replaceChild(r,n),s++);else{i=null;for(var u=a;u<t.childNodes.length;u++)if(p(t.childNodes[u],o)){i=t.childNodes[u];break}i?((r=h(o,i))!==i&&s++,t.insertBefore(r,n)):o.id||n.id?(t.insertBefore(o,n),s++):(r=h(o,n))!==n&&(t.replaceChild(r,n),s++)}else t.appendChild(o),s++;else t.removeChild(n),a--}function p(e,t){return e.id?e.id===t.id:e.isSameNode?e.isSameNode(t):e.tagName===t.tagName&&e.type===U&&e.nodeValue===t.nodeValue}function v(){if(!(this instanceof v))return new v;this.trie={nodes:{}}}function w(e){function t(e){for(var t=new Array(arguments.length),r=1;r<t.length;r++)t[r]=arguments[r];var i=o.match(e);if(i&&i.cb){t[0]=i.params;var s=i.cb;return s.apply(s,t)}var a=o.match(n);if(a&&a.cb){t[0]=a.params;var u=a.cb;return u.apply(u,t)}throw new Error("route '"+e+"' did not match")}if(!(this instanceof w))return new w(e);var n=(e||"").replace(/^\//,""),o=z();return t._trie=o,t.emit=t,t.on=function(e,n){return e=e||"/",n.route=e,n&&n._wayfarer&&n._trie?o.mount(e,n._trie.trie):o.create(e).cb=n,t},t._wayfarer=!0,t}function b(e,t){return(e=t?e.replace(Z,""):e.replace(J,"")).replace(ee,"").replace(Q,"/")}function g(e){if(!(this instanceof g))return new g(e);e=e||{};var t=this;this._events={DOMCONTENTLOADED:"DOMContentLoaded",DOMTITLECHANGE:"DOMTitleChange",REPLACESTATE:"replaceState",PUSHSTATE:"pushState",NAVIGATE:"navigate",POPSTATE:"popState",RENDER:"render"},this._historyEnabled=void 0===e.history||e.history,this._hrefEnabled=void 0===e.href||e.href,this._hasWindow="undefined"!=typeof window,this._createLocation=D,this._loaded=!1,this._tree=null,this.router=te({curry:!0}),this.emitter=R("choo.emit");var n={events:this._events};this.hasWindow?(this.state=window.initialState?H(window.initialState,n):n,delete window.initialState):this.state=n,this._hasWindow&&(this.state.title=document.title),this.emitter.prependListener(this._events.DOMTITLECHANGE,function(e){t.state.title=e,t._hasWindow&&(document.title=e)})}var A,y=function e(t,n){for(var o=0;o<n.length;o++){var r=n[o];if(Array.isArray(r))e(t,r);else{if(("number"==typeof r||"boolean"==typeof r||r instanceof Date||r instanceof RegExp)&&(r=r.toString()),"string"==typeof r){if(/^[\n\r\s]+$/.test(r))continue;if(t.lastChild&&"#text"===t.lastChild.nodeName){t.lastChild.nodeValue+=r;continue}r=document.createTextNode(r)}r&&r.nodeType&&t.appendChild(r)}}},E=function(n,r){return r("log:debug","Rendering main view"),function(){var e=y,t=document.createElement("body"),n=document.createElement("section");n.setAttribute("class","todoapp"),e(n,["\n        ",arguments[0],"\n        ",arguments[1],"\n        ",arguments[2],"\n      "]);var o=document.createElement("footer");o.setAttribute("class","info");var r=document.createElement("p");e(r,["Double-click to edit a todo"]);var i=document.createElement("p"),s=document.createElement("a");s.setAttribute("href","https://yoshuawuyts.com/"),e(s,["Yoshua Wuyts"]),e(i,["choo by ",s]);var a=document.createElement("p"),u=document.createElement("a");return u.setAttribute("href","http://shuheikagawa.com"),e(u,["Shuhei Kagawa"]),e(a,["Created by ",u]),e(o,["\n        ",r,"\n        ",i,"\n        ",a,"\n      "]),e(t,["\n      ",n,"\n      ",o,"\n    "]),t}(e(n,r),o(n,r),t(n,r))},_=function(e){var t=document.readyState;if("complete"===t||"interactive"===t)return setTimeout(e,0);document.addEventListener("DOMContentLoaded",function(){e()})},N=function(e,t,n){var o,r=e.length;if(!(t>=r||0===n)){var i=r-(n=t+n>r?r-t:n);for(o=t;o<i;++o)e[o]=e[o+n];e.length=i}},T={},L="undefined"!=typeof window,C=L&&window.requestIdleCallback,S=r,k=!0;try{A=window.performance,k="true"===window.localStorage.DISABLE_NANOTIMING||!A.mark}catch(e){}var O=function(e){function t(t){var r="end-"+n+"-"+e;A.mark(r),S(function(){var i=e+" ["+n+"]";A.measure(i,o,r),A.clearMarks(o),A.clearMarks(r),t&&t(e)})}if(k)return i;var n=(1e4*A.now()).toFixed()%Number.MAX_SAFE_INTEGER,o="start-"+n+"-"+e;return A.mark(o),t.uuid=n,t},R={};R=s,s.prototype.emit=function(e,t){var n=O(this._name+"('"+e+"')"),o=this._listeners[e];return o&&o.length>0&&this._emit(this._listeners[e],t),this._starListeners.length>0&&this._emit(this._starListeners,e,t,n.uuid),n(),this},s.prototype.on=s.prototype.addListener=function(e,t){return"*"===e?this._starListeners.push(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)),this},s.prototype.prependListener=function(e,t){return"*"===e?this._starListeners.unshift(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].unshift(t)),this},s.prototype.once=function(e,t){function n(){t.apply(o,arguments),o.removeListener(e,n)}var o=this;return this.on(e,n),this},s.prototype.prependOnceListener=function(e,t){function n(){t.apply(o,arguments),o.removeListener(e,n)}var o=this;return this.prependListener(e,n),this},s.prototype.removeListener=function(e,t){function n(e,t){if(e){var n=e.indexOf(t);return-1!==n?(N(e,n,1),!0):void 0}}return"*"===e?(this._starListeners=this._starListeners.slice(),n(this._starListeners,t)):(void 0!==this._listeners[e]&&(this._listeners[e]=this._listeners[e].slice()),n(this._listeners[e],t))},s.prototype.removeAllListeners=function(e){return e?"*"===e?this._starListeners=[]:this._listeners[e]=[]:(this._starListeners=[],this._listeners={}),this},s.prototype.listeners=function(e){var t="*"!==e?this._listeners[e]:this._starListeners,n=[];if(t)for(var o=t.length,r=0;r<o;r++)n.push(t[r]);return n},s.prototype._emit=function(e,t,n,o){if(void 0!==e){void 0===n&&(n=t,t=null);for(var r=e.length,i=0;i<r;i++){var s=e[i];t?void 0!==o?s(t,n,o):s(t,n):s(n)}}};var I=/[noopener|noreferrer] [noopener|noreferrer]/,P=/^[\w-_]+:/,x=function(e,t){t=t||window.document,window.addEventListener("click",function(n){if(!(n.button&&0!==n.button||n.ctrlKey||n.metaKey||n.altKey||n.shiftKey||n.defaultPrevented)){var o=function e(n){if(n&&n!==t)return"a"!==n.localName||void 0===n.href?e(n.parentNode):n}(n.target);o&&(window.location.origin!==o.origin||o.hasAttribute("download")||"_blank"===o.getAttribute("target")&&I.test(o.getAttribute("rel"))||P.test(o.getAttribute("href"))||(n.preventDefault(),e(o)))}})},D=function(){return window.location.pathname.replace(/\/$/,"")+window.location.hash.replace(/^#/,"/")},V=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","oncontextmenu","onfocusin","onfocusout"],$=V.length,M=function(e,t){var n=e.nodeType,o=e.nodeName;1===n&&a(e,t),3!==n&&8!==n||(t.nodeValue=e.nodeValue),"INPUT"===o?c(e,t):"OPTION"===o?d(e,t):"TEXTAREA"===o&&l(e,t),u(e,t)},U=3,G=function(e,t){return h(t,e)},j=new RegExp("([^?=&]+)(=([^&]*))?","g"),q=function(e){var t={};return e.replace(/^.*\?/,"").replace(j,function(e,n,o,r){t[window.decodeURIComponent(n)]=window.decodeURIComponent(r)}),t},W=function(e,t){t||(t=window.requestAnimationFrame);var n=!1,o=null;return function(){null!==o||n||(n=!0,t(function(){n=!1;for(var t=o.length,r=new Array(t),i=0;i<t;i++)r[i]=o[i];e.apply(e,r),o=null})),o=arguments}},H=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var o in n)K.call(n,o)&&(e[o]=n[o])}return e},K=Object.prototype.hasOwnProperty,B=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)F.call(n,o)&&(e[o]=n[o])}return e},F=Object.prototype.hasOwnProperty,z={};z=v,v.prototype.create=function(e){function t(e,o){var r=n.hasOwnProperty(e)&&n[e];if(!1===r)return o;var i=null;return/^:|^\*/.test(r)?(o.nodes.hasOwnProperty("$$")?i=o.nodes.$$:(i={nodes:{}},o.nodes.$$=i),"*"===r[0]&&(o.wildcard=!0),o.name=r.replace(/^:|^\*/,"")):o.nodes.hasOwnProperty(r)?i=o.nodes[r]:(i={nodes:{}},o.nodes[r]=i),t(e+1,i)}var n=e.replace(/^\//,"").split("/");return t(0,this.trie)},v.prototype.match=function(e){function t(e,r){if(void 0!==r){var i=n[e];if(void 0===i)return r;if(r.nodes.hasOwnProperty(i))return t(e+1,r.nodes[i]);if(r.wildcard){try{o.wildcard=decodeURIComponent(n.slice(e).join("/"))}catch(n){return t(e,void 0)}return r.nodes.$$}if(r.name){try{o[r.name]=decodeURIComponent(i)}catch(n){return t(e,void 0)}return t(e+1,r.nodes.$$)}return t(e+1)}}var n=e.replace(/^\//,"").split("/"),o={},r=t(0,this.trie);if(r)return r=H(r),r.params=o,r},v.prototype.mount=function(e,t){var n=e.replace(/^\//,"").split("/"),o=null,r=null;if(1===n.length)r=n[0],o=this.create(r);else{var i=n.splice(0,n.length-1).join("/");r=n[0],o=this.create(i)}B(o.nodes,t.nodes),t.name&&(o.name=t.name),o.nodes[""]&&(Object.keys(o.nodes[""]).forEach(function(e){"nodes"!==e&&(o[e]=o.nodes[""][e])}),B(o.nodes,o.nodes[""].nodes),delete o.nodes[""].nodes)};var X=w,Y=/file:\/\//.test("object"==typeof window&&window.location&&window.location.origin),Z=new RegExp("^(file://|/)(.*.html?/?)?"),J=new RegExp("^(http(s)?(://))?(www.)?[a-zA-Z0-9-_.]+(:[0-9]{1,5})?(/{1})?"),Q=new RegExp("#"),ee=new RegExp("[?].*$"),te=function(e){function t(e){return o?(e=b(e,Y))===i?r():(i=e,(r=n(e))()):n(e)}var n=X((e=e||{}).default||"/404"),o=e.curry||!1,r=null,i=null;return t.router=n,t.on=function(e,t){e=e.replace(/^[#\/]/,""),n.on(e,t)},t},ne=function(e,t){if(e)try{var n=document.querySelector(e);n&&n.scrollIntoView(t)}catch(e){}},oe=g,re={};g.prototype.route=function(e,t){var n=this;this.router.on(e,function(o){return function(){n.state.params=o,n.state.route=e;var r=O("choo.route('"+e+"')"),i=t(n.state,function(e,t){n.emitter.emit(e,t)});return r(),i}})},g.prototype.use=function(e){var t="choo.use";t=e.storeName?t+"("+e.storeName+")":t;var n=O(t);e(this.state,this.emitter,this),n()},g.prototype.start=function(){var e=this;return this._historyEnabled&&(this.emitter.prependListener(this._events.NAVIGATE,function(){e.state.query=q(window.location.search),e._loaded&&(e.emitter.emit(e._events.RENDER),setTimeout(ne.bind(null,window.location.hash),0))}),this.emitter.prependListener(this._events.POPSTATE,function(){e.emitter.emit(e._events.NAVIGATE)}),this.emitter.prependListener(this._events.PUSHSTATE,function(t){window.history.pushState(re,null,t),e.emitter.emit(e._events.NAVIGATE)}),this.emitter.prependListener(this._events.REPLACESTATE,function(t){window.history.replaceState(re,null,t),e.emitter.emit(e._events.NAVIGATE)}),window.onpopstate=function(){e.emitter.emit(e._events.POPSTATE)},e._hrefEnabled&&x(function(t){var n=t.href;n!==window.location.href&&e.emitter.emit(e._events.PUSHSTATE,n)})),this.state.href=this._createLocation(),this.state.query=q(window.location.search),this._tree=this.router(this.state.href),this.emitter.prependListener(e._events.RENDER,W(function(){var t=O("choo.render");e.state.href=e._createLocation();var n=e.router(e.state.href),o=O("choo.morph");G(e._tree,n),o(),t()})),_(function(){e.emitter.emit(e._events.DOMCONTENTLOADED),e._loaded=!0}),this._tree},g.prototype.mount=function(e){var t=this;_(function(){var n=O("choo.render"),o=t.start();t._tree=document.querySelector(e);var r=O("choo.morph");G(t._tree,o),r(),n()})},g.prototype.toString=function(e,t){return this.state=H(this.state,t||{}),this.state.href=e.replace(/\?.+$/,""),this.state.query=q(e),this.router(e).toString()};var ie={exports:{}},se=oe();se.use(function(e,t){function n(t){e.todos.input=t}function o(n){var o={id:e.todos.idCounter,editing:!1,done:!1,name:n};e.todos.idCounter+=1,e.todos.active.push(o),e.todos.all.push(o),t.emit("render")}function r(n){e.todos.all.forEach(function(e){e.id===n&&(e.editing=!0)}),t.emit("render")}function i(n){e.todos.all.forEach(function(e){e.id===n&&(e.editing=!1)}),t.emit("render")}function s(n){var o=e.todos.all.filter(function(e){return e.id===n.id})[0];n.done&&!1===o.done?(e.todos.active.splice(e.todos.active.indexOf(o),1),e.todos.done.push(o)):!1===n.done&&o.done&&(e.todos.done.splice(e.todos.done.indexOf(o),1),e.todos.active.push(o)),Object.assign(o,n),t.emit("render")}function a(n){var o=null,r=null;if(e.todos.all.forEach(function(e,t){e.id===n&&(o=t,r=e)}),e.todos.all.splice(o,1),r.done){var i,s=e.todos.done;s.forEach(function(e,t){e.id===n&&(i=t)}),s.splice(i,1)}else{var a,u=e.todos.active;u.forEach(function(e,t){e.id===n&&(a=t)}),u.splice(a,1)}t.emit("render")}function u(n){e.todos.done.forEach(function(t){var n=e.todos.all.indexOf(t);e.todos.all.splice(n,1)}),e.todos.done=[],t.emit("render")}function d(n){var o=e.todos.all.filter(function(e){return e.id===n})[0],r=o.done;o.done=!r;var i=r?e.todos.done:e.todos.active,s=r?e.todos.active:e.todos.done,a=i.indexOf(o);i.splice(a,1),s.push(o),t.emit("render")}function c(n){var o=e.todos.all,r=e.todos.all.length&&e.todos.done.length===e.todos.all.length;o.forEach(function(e){e.done=!r}),r?(e.todos.done=[],e.todos.active=e.todos.all):(e.todos.done=e.todos.all,e.todos.active=[]),t.emit("render")}e.todos||(e.todos={},e.todos.active=[],e.todos.done=[],e.todos.all=[],e.todos.idCounter=0),e.todos.input="",t.on("DOMContentLoaded",function(){t.on("todos:create",o),t.on("todos:update",s),t.on("todos:delete",a),t.on("todos:input",n),t.on("todos:edit",r),t.on("todos:unedit",i),t.on("todos:toggle",d),t.on("todos:toggleAll",c),t.on("todos:deleteCompleted",u)})}),se.route("/",E),se.route("#active",E),se.route("#completed",E),se.route("*",E),se.mount("body"),ie=ie.exports}();
//# sourceMappingURL=bundle.js.map